# Nginx stream config for TLS termination (TCP)
# Place under /etc/nginx/conf.d/collab-stream.conf (or include manually).

stream {
    upstream collab_backend {
        server 127.0.0.1:4000;
    }

    server {
        listen 443 ssl;
        proxy_pass collab_backend;

        ssl_certificate     /etc/letsencrypt/live/example.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;

        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_prefer_server_ciphers on;
    }
}

